<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AHL LIMS</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <div class="container hdr">
    <div class="brand">Laboratory Information Management System</div>
    <div id="top-user" class="muted"></div>
  </div>
</header>

<main class="container">
  <!-- LOGIN -->
  <section id="page-login" class="card">
    <h2>Masuk dengan Google</h2>
    <p class="muted">Gunakan akun Google Anda untuk mengakses AHL LIMS.</p>
    <button id="btn-google" class="btn">Login Google</button>
  </section>

  <!-- DASHBOARD -->
  <section id="page-dashboard" class="card" style="display:none">
    <div class="row">
      <h2>Dashboard</h2>
      <div class="row-actions">
        <a href="#" class="btn" data-page="submit">Pengajuan Sample</a>
        <a href="report.html" class="btn secondary">Reports</a>
        <a href="download.html" class="btn secondary">Downloads</a>
        <button id="btn-logout" class="btn secondary">Logout</button>
      </div>
    </div>
    <div class="muted">Waktu: <span id="clock"></span> â€¢ Peran: <span id="role"></span></div>

    <div class="card">
      <h3>Sample Saya</h3>
      <div id="mine"></div>
    </div>

    <div id="supervisor-block" style="display:none">
      <div class="card">
        <h3>Konsol Supervisor</h3>
        <nav class="nav">
          <a href="#" class="btn flat" data-page="users">Users</a>
          <a href="#" class="btn flat" data-page="all">All Samples</a>
          <a href="#" class="btn flat" data-page="verify">Verify Results</a>
        </nav>
      </div>
    </div>
  </section>

<!-- SUBMIT (ganti section lama) -->
<section id="page-submit" class="card" style="display:none">
  <h3>Pengajuan Sample</h3>
  <form id="submit-form">
    <div class="grid">
      <div>
        <label>Submission Code</label>
        <input name="submit_code" required placeholder="SUB-2025-0001"/>
      </div>
      <div>
        <label>Client Name</label>
        <input name="client_name" placeholder="PT Contoh Sejahtera"/>
      </div>
      <div>
        <label>Pond/Site</label>
        <input name="pond_site" placeholder="Tambak A-3"/>
      </div>
      <div>
        <label>Notes</label>
        <input name="notes" placeholder="Keterangan singkat"/>
      </div>
    </div>

    <div class="space-top">
      <h4>Daftar Sampel</h4>
      <div id="samples-wrap"></div>
      <button class="btn flat" id="btn-add-sample" type="button">+ Tambah Sampel</button>
    </div>

    <div class="space-top">
      <button type="submit" class="btn">Simpan</button>
      <a href="#" class="btn secondary" data-page="dashboard">Kembali</a>
    </div>
  </form>
  <div id="submit-msg" class="muted space-top"></div>
</section>


  <!-- USERS (Supervisor) -->
  <section id="page-users" class="card" style="display:none">
    <h3>Users</h3>
    <div id="users"></div>
    <p class="muted">Role diubah via RPC <code>app.set_user_role</code>.</p>
  </section>

  <!-- ALL SAMPLES (Supervisor) -->
  <section id="page-all" class="card" style="display:none">
    <h3>All Samples</h3>
    <div id="all"></div>
  </section>

  <!-- VERIFY (Supervisor) -->
  <section id="page-verify" class="card" style="display:none">
    <h3>Verify Results</h3>
    <div id="verify"></div>
  </section>
</main>

<footer>
  <div class="container">Provided by: Animal Health Laboratory</div>
</footer>

<!-- ====== ENV (ISI nilainya) ====== -->
<script>
  window.SUPABASE_URL = window.SUPABASE_URL || "https://YOUR-PROJECT.supabase.co";
  window.SUPABASE_ANON_KEY = window.SUPABASE_ANON_KEY || "YOUR-ANON-KEY";
</script>
<script type="module" src="app.js"></script>
</body>
</html>
